# JJinmat 기능 정의서

JJimat의 6가지 대표 feature를 플로우 차트와 함께 볼 수 있습니다.  
<br>

## 1. 회원가입 및 로그인

### 1.1 기능명 : 회원가입

#### 기능 설명

사용자가 회원 정보를 입력하여 계정을 생성할 수 있습니다.

#### 입력 항목

- **이메일** : 문자열, 최대 50자 (유효성 검사 필요)
- **이름**: 문자열, 최대 50자
- **주민등록번호**: 문자열, 13자 (유효성 검사 필요)
- **비밀번호**: 문자열, 최소 10자
- **비밀번호 확인** : 문자열, 최소 10자 (비밀번호와 일치 여부 확인 필요)

#### 사용자 액션

**가입 버튼 클릭**

1. 사용자가 모든 입력 항목을 작성합니다.
2. 입력 항목의 유효성을 검사합니다.
   - 이메일 혈식 검증
   - 이름 길이 검증
   - 비밀번호와 비밀번호 확인의 일치 여부 확인
3. 유효성 검사에 실패하면 오류 정보를 표시하고 절차를 종료합니다.
4. 유효성 검사를 통과하면 회원가입 API를 호출합니다.
5. API 호출 성공 시 요약 정보를 표시하고 로그인 화면으로 전환합니다.
6. API 호출 실패 시 오류 정보를 표시합니다.
   <br> <br>

```mermaid
flowchart TD
    A[가입 버튼 클릭] --> B[입력 항목 유효성 검증]
    B{유효한 입력} -- 예 --> C[회원가입 API 호출]
    B{유효한 입력} -- 아니오 --> D[오류 표시]
    D --> A
    C --> E{호출 성공}
    E -- 성공 --> F[요약 정보 표시]
    F --> G[로그인 화면으로 이동]
    E -- 실패 --> H[호출 실패 정보 표시]
    H --> A
    G --> Z[종료]
```

<br>

**취소 버튼 클릭**

1. 사용자가 취소 버튼을 클릭하면 로그인 화면으로 이동합니다.

```mermaid
flowchart TD
    A[취소 버튼 클릭] --> B[로그인 화면으로 이동]
    B --> Z[종료]
```

### 1.2 기능명 : 로그인

#### 기능 설명

사용자가 이메일과 비밀번호를 입력하여 로그인할 수 있습니다.

#### 입력 항목

- **이메일**: 문자열, 최대 50자 (유효성 검사 필요)
- **비밀번호**: 문자열, 최소 10자 (유효성 검사 필요)

#### 사용자 액션

**로그인 버튼 클릭**

1. 사용자가 이메일과 비밀번호를 입력합니다.
2. 입력 항목의 유효성을 검사합니다.
   - 이메일 형식 검증
   - 비밀번호 길이 검증
3. 유효성 검사에 실패하면면 오류 정보를 표시하고 절차를 종료합니다.
4. 유효성 검사를 통과하면 로그인 API를 호출합니다.
5. API 호출 성공 시 메인 화면으로 전환합니다.
6. API 호출 실패 시 오류 정보를 표시합니다.
   <br><br>

```mermaid
flowchart TD
    A[로그인 버튼 클릭] --> B[입력 항목 유효성 검증]
    B{유효한 입력} -- 예 --> C[로그인 API 호출]
    B{유효한 입력} -- 아니오 --> D[오류 표시]
    D --> A
    C --> E{호출 성공}
    E -- 성공 --> F[메인 화면으로 이동]
    E -- 실패 --> G[로그인 실패 정보 표시]
    G --> A
    F --> Z[종료]
```

<br>

**취소 버튼 클릭**

1. 사용자가 취소 버튼을 클릭하면 메인 화면으로 이동합니다.

```mermaid
flowchart TD
    A[취소 버튼 클릭] --> B[메인 화면으로 이동]
    B --> Z[종료]
```

### 1.3 기능명: 계정 삭제

#### 기능 설명

사용자가 본인의 계정을 삭제할 수 있으며 삭제 전 비밀번호 확인 절차를 거칩니다.

#### 입력 항목

- **비밀번호**: 문자열, 최소 10자(삭제시)

#### 사용자 액션

**삭제 버튼 클릭**

1. 사용자가 비밀번호 확인 정보를 입력합니다.
2. 입력 항목의 유효성을 검사합니다.
   - 비밀번호 확인의 유효성 및 일치 여부 검증
3. 유효성 검사에 실패하면 오류 정보를 표시하고 절차를 종료합니다.
4. 유효성 검사에 통과하면 개인정보 수정 API를 호출합니다.
5. API 호출 성공 시 수정 완료 메세지를 표시하고 로그인 화면으로 전환합니다.
6. API 호출 실패 시 오류 정보를 표시합니다.
   <br><br>

```mermaid
flowchart TD
    A[삭제 버튼 클릭] --> B[비밀번호 확인 입력]
    B --> C[입력 항목 유효성 검증]
    C{유효한 입력} -- 예 --> D[계정 삭제 API 호출]
    C{유효한 입력} -- 아니오 --> E[오류 표시]
    E --> A
    D --> F{호출 성공}
    F -- 성공 --> G[삭제 완료 메시지 표시]
    G --> H[로그인 화면으로 이동]
    F -- 실패 --> I[호출 실패 정보 표시]
    I --> A
    H --> Z[종료]
```

<br>

**취소 버튼 클릭**

1. 사용자가 취소 버튼을 클릭하면 마이페이지 화면으로 이동합니다.

```mermaid
flowchart TD
    A[취소 버튼 클릭] --> B[마이페이지 화면으로 이동]
    B --> Z[종료]
```

<br>

## 2. 매장 정보 제공

### 2.1 기능명: 매장 정보 확인

#### 기능 설명

사용자가 특정 맛집을 클릭하면 해당 매장의 기본적인 정보를 확인할 수 있습니다.  
**주소**, **영업시간**, **전화번호**, **예약 방식** 등을 포함한 상세 정보를 제공합니다. 예약 방식의 경우 전화 예약, 온라인 예약(예약 플랫폼 링크), 현장 방문 등의 구체적 방식을 안내해 사용자의 편의를 돕습니다.

#### 권한 요청

- 사용자의 위치 기반 GPS 허용 : 항상 허용하기 / 앱을 사용할 때만 허용하기
- 권한 요청 받은 경우 외부 지도 앱(예: Google Maps, Naver Maps, Kakao Maps)과 연동하여 안내 가능

#### 사용자 액션

1. 사용자가 검색 결과에서 특정 맛집을 클릭합니다.
2. 해당 매장의 상세 정보를 확인할 수 있는 페이지로 이동합니다.
3. 다음 정보를 확인할 수 있습니다:
   - 매장 주소 및 지도 연동
   - 영업시간 (요일별 구분)
   - 전화번호
   - 예약 가능한 방식
   - 간편한 길찾기 기능
   - 기타 제공 정보 (리뷰, 추천 메뉴 등)
4. 사용자가 예약을 진행하려는 경우, 제공된 예약 방법(전화/온라인)을 통해 연결됩니다.
5. 사용자가 길찾기를 원할 경우 지도에서 길찾기 옵션을 선택하고 외부 지도 앱으로 연동됩니다.
   <br><br>

```mermaid
flowchart TD
   A[사용자가 맛집 클릭] --> B[매장 상세 정보 페이지 이동]
    B --> D[예약 정보 제공]
    B --> E[지도 연동 및 길찾기 기능]
    E --> F{길찾기 옵션 선택}
    F -- 자동차 --> G[자동차 경로 표시]
    F -- 대중교통 --> H[대중교통 경로 표시]
    F -- 도보 --> I[도보 경로 표시]
    G --> J[외부 지도 앱 연동]
    H --> J[외부 지도 앱 연동]
    I --> J[외부 지도 앱 연동]
    J --> Z[종료]
    D --> K{예약 방식 선택}
    K -- 전화 예약 --> L[전화 연결 안내]
    K -- 온라인 예약 --> M[예약 플랫폼으로 이동]
    K -- 현장 예약 --> N[현장 방문 안내]
    L --> Z[종료]
    M --> Z[종료]
    N --> Z[종료]
```

<br>

## 3. 검색 및 추천

### 3.1 기능명: GPS 기반 검색

#### 기능 설명

현재 위치를 기반으로 음식점에 대한 정보를 제공합니다.

#### 권한 요청

- 사용자의 위치 기반 GPS 허용 : 항상 허용하기 / 앱을 사용할 때만 허용하기

#### 사용자 액션

1. 사용자가 GPS를 활성화해야 지도에 현재 위치를 표시할 수 있다.
2. 현재 위치를 기준으로 기본 줌 수준(예: 반경 1km)을 가진 지도를 띄운다.
3. 사용자가 지도를 드래그하거나 확대/축소하면 새로운 범위를 계산한다.
4. 사용자가 보고 있는 지도 뷰포트를 기준으로 서버에 맛집 데이터를 요청한다.
5. 서버에서 반환된 데이터(맛집 정보)를 지도에 핀으로 표시한다.
6. 사용자가 핀을 클릭하면 가게 정보를 확인할 수 있다.(예: 메뉴, 리뷰, 주소 등)
7. 관심 있는 가게의 상세 정보를 제공하거나, 다른 가게를 선택한다.
   <br><br>

```mermaid
flowchart TD
    A[사용자 위치 확인] -->|GPS 활성화 요청| B[현재 위치 가져오기]
    B --> C[지도 렌더링]
    C -->|사용자 상호작용| D[지도 이동/확대/축소]
    D -->|현재 화면 범위 확인| E[데이터 요청]
    E -->|맛집 데이터 반환| F[지도에 핀 표시]
    F --> G[가게 정보 보기]
    G --> H[메뉴, 리뷰 등 추가 정보 제공]
    G -->|재검색 요청| C
    H -->|재검색 요청| C
```

<br>

### 3.2 기능명: AI 챗봇 추천 서비스

#### 기능 설명

챗봇을 통해 사용자의 요구와 선호도에 맞는 음식점 추천 서비스를 제공합니다.

#### 입력 항목

- 사용자 텍스트 입력 : 문자열, 최대 100자로 자연어 형태로 입력 가능 (예: "크리스마스에 커플이 갈 만한 분위기 좋은 성수 이탈리안 맛집 추천해줘.")

#### 사용자 액션

1. 사용자가 텍스트를 입력한다. (ex. "크리스마스에 커플이 갈 만한 분위기 좋은 성수 이탈리안 맛집 추천해줘.")
2. 자연어 처리 과정을 통해 사용자의 문장에서 중요한 키워드를 추출한다. (ex. ”크리스마스”, "커플", "성수", "이탈리안", "분위기 좋은")
3. 사용자 프로필 분석하여 사용자의 선호도 데이터, 과거 기록과 비교한다.
4. 추천 엔진이 작동된다.
   - 필터링: 위치(성수), 음식 종류(이탈리안), 분위기 및 조건
   - 데이터베이스 조회: 해당 조건에 맞는 음식점 정보 탐색
5. 음식점 3~5개의 이름, 위치, 특징(분위기, 메뉴 등)을 정리하여 추천을 생성한다.
6. 매장 정보와 함께 챗봇 응답 생성 후 다시 추천 요청 플래그 Boolean (True / False)를 띄워 준다.
   <br><br>

```mermaid
flowchart TD
    A[사용자 입력] --> B[자연어 처리]
    B -->|키워드 추출| C[사용자 프로필 분석]
    C -->|선호도와 과거 기록 비교| D[추천 엔진 작동]
    D -->E[추천 생성]
    E --> F[챗봇 응답]
    F --> G{만족하십니까?}
    G -->|예| H[추천 완료]
    G -->|아니오| I[다시 추천받기]
    I -->|새로운 조건 입력 또는 재검색| D
```

<br>

### 3.3 기능명: 카테고리 기반 검색

#### 기능 설명

제공되는 여러 카테고리 중 사용자가 원하는 분류를 직접 선택해 맛집 정보를 탐색할 수 있게 합니다.

#### 입력 항목

- 카테고리 : 선택형 목록 (프론트엔드에서 제공)

#### 사용자 액션

1. 첫 단계에서 방송/유튜브/가이드북 또는 음식 분류의 원하는 카테고리를 선택한다.
2. 선택한 세부 카테고리에 따라 API 호출 후 맛집 리스트를 표시한다.
3. 리스트 중 하나를 클릭하면 가게 상세 정보를 확인할 수 있다.
4. 사용자 추가 이벤트 요청에 따라 메뉴, 리뷰 등을 제공하거나 다른 카테고리로 이동해 탐색이 가능하다.
   <br><br>

```mermaid
flowchart TD
  A[홈 화면] --> B[카테고리 선택]
  B -->|API 호출| C[맛집 리스트 표시]
  C --> D[가게 상세 정보 보기]
    D -->|추가 정보 확인| E[지도/리뷰/재탐색]
    E -->|다른 맛집 보기| B
```

<br>

## 4. 리뷰 및 평점관리

### 4.1 기능명: 리뷰작성

#### 기능 설명

- 사용자가 선택한 식당에 대해 리뷰 글을 작성하고 저장할 수 있다.

#### 입력 항목

- 리뷰 제목: 문자열, 최대 100자 (유효성 검사 필요)
- 리뷰 내용: 문자열, 최대 1000자 (유효성 검사 필요)
- 별점: 정수, 1~5
- 업로드 사진: 이미지 파일, 최대 5개 (선택 사항)

#### 사용자 액션

**리뷰 작성 및 제출**

1. 리뷰 작성 버튼을 클릭한다.
2. 별점, 텍스트 및 사진 첨부하여 작성한다.
3. 입력 항목 유효성 검사를 실행한다.
   : 유효성 검사 오류 발생시 사용자에게 오류 정보 알림
4. API 호출 성공 시 리뷰 저장, 확인 메시지 표시. 실패 시 오류 메시지 표시 후 재시도한다.
5. 제출 완료
   <br><br>

```mermaid
flowchart TD
    A[리뷰작성 버튼] --클릭--> B[리뷰 작성] --> C[입력 항목 유효성 검증]
    C{유효한 입력} -- 예 --> D[다음 버튼 활성화]
    C{유효한 입력} -- 아니오 --> E[오류 표시]
    E --> B
    D --> F[API 호출] --> G{호출 성공}
    G --예--> H[리뷰 제출]
    G --아니오--> I[오류 표시] --> F
```

<br>

**리뷰 작성 취소**

1. 작성 화면에서 취소 버튼을 클릭한다.
2. 이전 화면으로 이동된다.

```mermaid
flowchart TD
 A[취소 버튼 클릭] --데이터 불러오기--> B[이전 화면으로 이동]
```

<br>

### 4.2 기능명: 리뷰수정

#### 기능 설명

사용자가 작성한 리뷰 글을 수정하고 저장할 수 있다.

#### 입력 항목

- 리뷰 제목: 문자열, 최대 100자 (유효성 검사 필요)
- 리뷰 내용: 문자열, 최대 1000자 (유효성 검사 필요)
- 별점: 정수, 1~5
- 업로드 사진: 이미지 파일, 최대 5개 (선택 사항)

#### 사용자 액션

**리뷰 수정하기**

1. 리뷰 수정하기 버튼을 클릭한다.
2. 입력 항목 유효성 검사를 실행한다.
3. 유효성 검사 오류 발생시 사용자에게 오류 정보를 알리고 유효성 검사 통과 시 리뷰 수정 API를 호출한다.
   <br><br>

```mermaid
flowchart TD
    A[리뷰 수정하기 버튼 클릭] --> B[입력 항목 유효성 검증]
    B{유효한 입력} -- 예 --> C[리뷰 수정 API 호출]
    B{유효한 입력} -- 아니오 --> D[오류 표시]
    D --> A
    C --> E{API 호출 성공}
    E -- 성공 --> F[확인 메시지 표시]
    F --> G[이전 화면으로 이동]
    E -- 실패 --> H[오류 메시지 표시]
    H --> A

```

<br>

**리뷰 수정 취소**

1. 작성 화면에서 취소 버튼을 클릭한다.
2. 이전 화면으로 이동한다.

```mermaid
flowchart TD
 A[취소 버튼 클릭] --> B[이전 화면으로 이동]
```

<br>

### 4.3 기능명: 리뷰삭제

#### 기능 설명

사용자가 작성한 리뷰를 삭제할 수 있다.

#### 사용자 액션

**리뷰 삭제**

1. 리뷰삭제 버튼을 클릭한다.
2. 삭제 확인 팝업 표시된다.
3. 삭제 확인 시 리뷰 삭제 API가 호출된다.
4. API 호출 성공 시 확인 메시지 표시 및 이전 화면으로 이동, 실패 시 오류 메시지가 표시된다.
   <br><br>

```mermaid
flowchart TD
    A[리뷰삭제 버튼 클릭] --> B[삭제 확인 팝업 표시]
    B -- 확인 --> C[리뷰 삭제 API 호출]
    B -- 취소 --> D[이전 화면으로 이동]
    C --> E{API 호출 성공}
    E -- 성공 --> F[확인 메시지 표시]
    F --> G[이전 화면으로 이동]
    E -- 실패 --> H[오류 메시지 표시]
    H --> A
```

<br>

## 5. 찜

### 5.1 기능명: 찜 등록 및 해제

#### 기능 설명

사용자가 특정 가게를 찜하거나 취소함으로써 관심있는 가게 목록을 최신 상태로 유지할 수 있다.

#### 입력 항목

- 찜 여부: Boolean 타입

#### 사용자 액션

**찜등록 및 해제**

1. 찜 버튼 클릭한다.
2. 입력 항목 유효성 검사 실행된다.
3. 유효성 검사 통과시 찜 API 호출되고 오류 발생시 찜 절차는 종료되며 사용자에게 오류 정보 알림을 띄운다.
4. API 호출 성공 후 요약 정보를 표시한다.
   <br><br>

```mermaid
flowchart TD
    A[찜 버튼 클릭] --> B[입력 항목 유효성 검증]
    B{유효한 입력} -- 예 --> C[찜 API 호출]
    B{유효한 입력} -- 아니오 --> D[오류 표시]
    D --> A
    C --> E{호출 성공}
    E -- 성공 --> F[요약 정보 표시]
    E -- 실패 --> H[호출 실패 정보 표시]
    H --> A
    F --> Z[종료]
```

<br>

## 6. 마이페이지 관리

### 6.1 기능명: 나의 찜 리스트

#### 기능 설명

사용자가 찜 목록을 확인하고 삭제할 수 있다.

#### 사용자 액션

1. 찜 리스트 클릭
2. 상세 페이지로 이동해 나의 리스트를 관리할 수 있다.
3. 원하는 수정 후 확인 팝업을 통해 삭제하거나 삭제 선택을 취소할 수 있다.
   <br><br>

```mermaid
flowchart TD
    A[찜 리스트 클릭] --> B[찜 상세페이지 화면으로 이동] --> 종료
    B[찜 상세페이지 화면으로 이동] --> C[삭제 버튼 클릭] --> D{확인 팝업} -- 예 --> E[삭제 완료] --> 종료
    D{확인 팝업} -- 아니오 --> F[삭제 취소] --> 종료
```

<br>

### 6.2 기능명: 나의 리뷰 리스트

#### 기능 설명

사용자가 내가 쓴 리뷰 목록을 확인하고 수정,삭제할 수 있다.

#### 사용자 액션

1. 리뷰 리스트를 클릭한다.
2. 리뷰 상세 페이지 화면으로 이동된다.
3. 원하는 내용으로 수정 및 편집 혹은 삭제된다.
4. 확인 팝업업이 떴을 때, [예]를 눌러 저장하거나 [아니오]를 눌러 저장을 취소할 수 있다.
   <br><br>

```mermaid
flowchart TD
    A[리뷰 리스트 클릭] --> B[리뷰 상세페이지 화면으로 이동] --> 종료
    B[리뷰 상세페이지 화면으로 이동] --> C[수정 버튼 클릭] --> D[내용 수정] --> E[저장 버튼 클릭] --> F{확인 팝업} -- 예 --> G[저장 완료] --> 종료
    F{확인 팝업} -- 아니오 --> H[저장 취소] --> 종료
    B[리뷰 상세페이지 화면으로 이동] --> I[삭제 버튼 클릭] --> J{확인 팝업} -- 예 --> K[삭제 완료] --> 종료
    J{확인 팝업} -- 아니오 --> L[삭제 취소] --> 종료
```

<br>

### 6.3 기능명: 개인정보 수정

#### 기능 설명

사용자가 본인의 계정 정보를 수정할 수 있습니다. 단, 비밀번호 확인을 통해 본인 인증을 완료해야 수정이 가능합니다.

#### 입력 항목

- **비밀번호**: 문자열, 최소 10자(변경시)

#### 사용자 액션

**수정 버튼 클릭**

1. 사용자가 비밀번호 확인 정보를 입력합니다.
2. 입력항목의 유효성을 검사합니다.
   - 비밀번호 확인의 유효성 및 일치 여부 검증
3. 유효성 검사에 실패하면 오류 정보를 표시하고 절차를 종료합니다.
4. 유효성 검사에 통과하면 개인정보 수정 API를 호출합니다.
5. API 호출 성공 시 수정 완료 메세지를 표시하고 마이페이지 화면으로 전환합니다.
6. API 호출 실패 시 오류 정보를 표시합니다.
   <br><br>

```mermaid
flowchart TD
    A[수정 버튼 클릭] --> B[입력 항목 유효성 검증]
    B{유효한 입력} -- 예 --> C[개인정보 수정 API 호출]
    B{유효한 입력} -- 아니오 --> D[오류 표시]
    D --> A
    C --> E{호출 성공}
    E -- 성공 --> F[수정 완료 메시지 표시]
    F --> G[마이페이지 화면으로 이동]
    E -- 실패 --> H[호출 실패 정보 표시]
    H --> A
    G --> Z[종료]
```

<br>

**취소 버튼 클릭**

1. 사용자가 취소 버튼을 클릭한다.
2. 마이페이지 화면으로 이동한다.
   <br><br>

```mermaid
flowchart TD
    A[취소 버튼 클릭] --> B[마이페이지 화면으로 이동]
    B --> Z[종료]
```

<br>

### 6.4 기능명 : 사용자 등급 확인

#### 기능 설명

사용자가 내 등급과 혜택을 확인할 수 있다.

#### 사용자 액션

1. 마이페이지의 내 등급 클릭한다.
2. 등급 혜택 상세페이지 화면으로 이동한다.
   <br><br>

```mermaid
flowchart TD
    A[내 등급 클릭] --> B[내 등급 혜택 상세페이지 화면으로 이동] --> 종료
```

---
